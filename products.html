<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–æ–≤–∞—Ä—ã</title>
  <style>
    body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: linear-gradient(180deg, #ff80b2, #ff9ac9);
  margin: 0;
  padding: 0;
  color: white;
  position: relative;  /* –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
}

    h1 {
      color: white;
      margin: 20px 0 10px;
      font-size: 26px;
    }

    /* –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ */
    .search-box {
      width: 90%;
      max-width: 400px;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      margin-bottom: 20px;
    }

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ –≤—Å–µ–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
#productGrid {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 4 –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ –ü–ö */
  gap: 15px;
  justify-content: center;
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –≤—Å—é —Å–µ—Ç–∫—É */
}

.product-card {
      max-width: 220px;
      width: 90%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 0 10px 0;
      transition: transform 0.2s;
    }

    .product-card:hover {
      transform: scale(1.03);
    }

    /* –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ */
    .product-card img {
      width: 100%;
      aspect-ratio: 3 / 4;
      object-fit: cover;
    }

    /* –¶–µ–Ω–∞ ‚Äì —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ñ–æ—Ç–æ */
    .product-price {
      font-size: 18px;
      font-weight: bold;
      color: #ff4081;
      margin: 10px 0 5px;
    }

    /* –ù–∞–∑–≤–∞–Ω–∏–µ ‚Äì –ø–æ–¥ —Ü–µ–Ω–æ–π */
    .product-name {
      font-size: 16px;
      font-weight: normal;
      margin: 0 8px 10px;
      text-align: center;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑–∞—Ç—å" */
    .order-btn {
      background: #ff4081;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      width: 90%;
      margin-top: auto;
      transition: background 0.3s;
    }

    .order-btn:hover {
      background: #e91e63;
    }
    /* –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥ */
.back-btn {
  position: absolute;         /* –ó–∞–∫—Ä–µ–ø–ª—è–µ–º –≤ —É–≥–ª—É */
  top: 0px;                  /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
  left: 20px;                 /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ */
  background: rgba(255, 255, 255, 0.2);
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.4);
}

    /* –ü–ª–∞–Ω—à–µ—Ç: 3 –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä—è–¥ */
@media (max-width: 1024px) {
  #productGrid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* –¢–µ–ª–µ—Ñ–æ–Ω: 2 –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä—è–¥ */
@media (max-width: 768px) {
  #productGrid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* –û—á–µ–Ω—å —É–∑–∫–∏–π —ç–∫—Ä–∞–Ω: 1 –∫–∞—Ä—Ç–æ—á–∫–∞ */
@media (max-width: 480px) {
  #productGrid {
    grid-template-columns: repeat(2, 1fr);
  }
}

  </style>
  
</head>
<body>

  <button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>

  <h1>–¢–æ–≤–∞—Ä—ã</h1>
  <input type="text" class="search-box" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">

  <div id="productGrid">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  <script>
    // --- –ß–∏—Ç–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL ---
    const params = new URLSearchParams(window.location.search);
    const selectedBrand = params.get("brand");
    const selectedCategory = params.get("category");

    console.log("‚úÖ URL params:", selectedBrand, selectedCategory);

    const productGrid = document.getElementById("productGrid");
    const searchInput = document.getElementById("searchInput");
    let allProducts = [];

    // --- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –±—Ä–µ–Ω–¥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è ---
    if (!selectedBrand || !selectedCategory) {
      productGrid.innerHTML = "<p style='color:white;'>‚ùå –ë—Ä–µ–Ω–¥ –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –≤—ã–±—Ä–∞–Ω—ã!</p>";
    } else {
      const jsonFile = `data/${selectedBrand.toLowerCase()}.json`;
      console.log("üìÇ –ó–∞–≥—Ä—É–∂–∞–µ–º JSON:", jsonFile);

      fetch(jsonFile)
        .then(res => {
          console.log("üîÑ –û—Ç–≤–µ—Ç fetch:", res);
          return res.json();
        })
        .then(data => {
          console.log("üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:", data);

          // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–±—Ä–µ–Ω–¥ —É–∂–µ –≤—ã–±—Ä–∞–Ω)
          allProducts = data.filter(p =>
            p.category.trim().toLowerCase() === selectedCategory.trim().toLowerCase()
          );

          console.log("‚úÖ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:", allProducts);

          if (allProducts.length === 0) {
            productGrid.innerHTML = "<p style='color:white;'>‚ùå –ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p>";
          } else {
            renderProducts(allProducts);
          }
        })
        .catch(err => {
          console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON:", err);
          productGrid.innerHTML = "<p style='color:white;'>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤</p>";
        });
    }

    // --- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ ---
    function renderProducts(list) {
      productGrid.innerHTML = "";
      list.forEach(p => {
        const card = document.createElement("div");
        card.classList.add("product-card");
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}">
          <div class="product-price">${p.price} ‚ÇΩ</div>
          <div class="product-name">${p.name}</div>
          <button class="order-btn">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        `;
        productGrid.appendChild(card);
      });
    }

    // --- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é ---
    searchInput.addEventListener("input", function() {
      const q = searchInput.value.toLowerCase();
      const filtered = allProducts.filter(p => p.name.toLowerCase().includes(q));
      renderProducts(filtered);
    });

     // --- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ ---
     function goBack() {
      window.history.back();
    }
  </script>

</body>
</html>
